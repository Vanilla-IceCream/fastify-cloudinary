(function(e,i){typeof exports=="object"&&typeof module<"u"?module.exports=i(require("fastify-plugin"),require("cloudinary")):typeof define=="function"&&define.amd?define(["fastify-plugin","cloudinary"],i):(e=typeof globalThis<"u"?globalThis:e||self,e.FastifyCloudinary=i(e.FastifyPlugin,e.Cloudinary))})(this,function(e,i){"use strict";return(t=>t&&typeof t=="object"&&"default"in t?t:{default:t})(e).default(async(t,n)=>{if(!n.url)throw Error("`url` parameter is mandatory");const o=l=>{var a,f;const u=new URL(l),y=(d,c)=>Object.keys(d).reduce((s,r)=>c.includes(r)?s:{...s,[r]:d[r]},{});return{cloud_name:u.host,api_key:(a=u.auth)==null?void 0:a.split(":")[0],api_secret:(f=u.auth)==null?void 0:f.split(":")[1],...y(n,["url"])}};i.v2.config(o(n.url)),t.decorate("cloudinary",i.v2)},{fastify:"4.x",name:"fastify-cloudinary"})});
