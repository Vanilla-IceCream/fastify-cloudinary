"use strict";const l=require("url"),s=require("fastify-plugin"),e=require("cloudinary"),c=t=>t&&typeof t=="object"&&"default"in t?t:{default:t},f=c(s),d=f.default(async(t,a)=>{const i=(o="")=>{var n,u;const r=l.urlToHttpOptions(new URL(o));return{cloud_name:r.hostname||void 0,api_key:(n=r.auth)==null?void 0:n.split(":")[0],api_secret:(u=r.auth)==null?void 0:u.split(":")[1],...a}};e.v2.config(i(a.url)),t.decorate("cloudinary",e.v2)},{fastify:"4.x",name:"fastify-cloudinary"});module.exports=d;
